<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Async test</title>
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.css">
</head>
<body>
<h1>test</h1>
<div id="test"></div>

<!--scripts-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquerymobile/1.4.5/jquery.mobile.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
<script src="http://mrpepper023.github.io/lib/control-structures.min.js"></script>
<script type="text/coffeescript">
###
   ここから test code
###
$(->

  PRINT = (str,next) -> console.log str; setTimeout(next, 200)

  cs._ ['arg1','arg2']
  ,(next,str1,str2) ->

    PRINT '[1st block]',->
      if str1 == str2
        PRINT 'str1 and str2:'+str1,->
          next()
      else
        PRINT 'str1:'+str1,->
          PRINT 'str2:'+str2,->
            next()

  ,(next) ->

    PRINT '[2nd block]',->
      next('arg','arg')

  ,(next,str1,str2) ->

    PRINT '[3rd block]',->
      if str1 == str2
        PRINT 'str1 and str2:'+str1,->
          next()
      else
        PRINT 'str1:'+str1,->
          PRINT 'str2:'+str2,->
            next()

  ,(next) ->

    PRINT '[last block]',->
      next()
  
)
###
   ここまで test code
###
</script>
<script type="text/javascript" src="http://mrpepper023.github.io/lib/coffee-script.js"></script>
</body>
</html>
